{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rokibul\\\\Documents\\\\case\\\\pages\\\\broadcaster-dashboard\\\\index.tsx\";\nvar __jsx = React.createElement;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport React from 'react';\nimport Router from 'next/router';\nimport Head from 'next/head';\nimport Error from 'next/error';\nimport { connect } from 'react-redux';\nimport { updatePerformer } from 'src/redux/user/actions';\nimport '../user/index.less';\nimport { PerformerSettingsForm, PerformerVerificationForm } from '@components/performer';\nimport DashBoard from '@components/dashboard';\nimport { BroadcasterTopHeader } from '@components/broadcaster-dashboard/broadcaster-top-header';\nclass BroadCaster extends React.PureComponent {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"state\", {\n      currentTab: 'dashboard'\n    });\n    _defineProperty(this, \"onbeforeunload\", () => {\n      this.handleTabChange('verification');\n    });\n    _defineProperty(this, \"handleTabChange\", tab => {\n      this.setState({\n        currentTab: tab\n      });\n    });\n    _defineProperty(this, \"capitalizeFirstLetter\", string => (string === null || string === void 0 ? void 0 : string.charAt(0).toUpperCase()) + (string === null || string === void 0 ? void 0 : string.slice(1)));\n    _defineProperty(this, \"submit\", data => {\n      const {\n        currentUser,\n        updatePerformer: handleUpdatePerformer\n      } = this.props;\n      if (data.privateChatPrice || data.messagePrice) {\n        data.privateChatPrice = Number(data.privateChatPrice);\n        data.messagePrice = Number(data.messagePrice);\n      }\n      handleUpdatePerformer(_objectSpread(_objectSpread(_objectSpread({}, currentUser), data), {}, {\n        isUpdateProfile: true\n      }));\n    });\n  }\n  static async getInitialProps({\n    ctx\n  }) {\n    const {\n      query\n    } = ctx;\n    return {\n      query\n    };\n  }\n  componentDidMount() {\n    const {\n      query\n    } = this.props;\n    if (query !== null && query !== void 0 && query.tab) {\n      this.setState({\n        currentTab: query.tab\n      });\n    }\n    window.addEventListener('beforeunload', this.onbeforeunload);\n    Router.events.on('routeChangeStart', this.onbeforeunload);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('beforeunload', this.onbeforeunload);\n    Router.events.off('routeChangeStart', this.onbeforeunload);\n  }\n  render() {\n    const {\n      error,\n      ui,\n      currentUser,\n      updating\n    } = this.props;\n    const {\n      currentTab\n    } = this.state;\n    if (error) {\n      return __jsx(Error, {\n        statusCode: (error === null || error === void 0 ? void 0 : error.statusCode) || 404,\n        title: (error === null || error === void 0 ? void 0 : error.message) || \"Sorry, we can't find this page\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 14\n        }\n      });\n    }\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }, \"BroadCaster | \", ui && this.capitalizeFirstLetter(ui.siteName))), __jsx(\"section\", {\n      className: \"px-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, __jsx(BroadcasterTopHeader, {\n      activeTab: currentTab,\n      updateTab: this.handleTabChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }), currentTab === 'dashboard' && __jsx(DashBoard, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }), currentTab === 'settings' && __jsx(PerformerSettingsForm, {\n      onFinish: this.submit,\n      updating: updating,\n      user: currentUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }), currentTab === 'verification' && __jsx(PerformerVerificationForm, {\n      onFinish: this.submit,\n      user: currentUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    })));\n  }\n}\n_defineProperty(BroadCaster, \"authenticate\", true);\n_defineProperty(BroadCaster, \"noredirect\", true);\nconst mapStates = state => ({\n  ui: _objectSpread({}, state.ui),\n  currentUser: _objectSpread({}, state.user.current),\n  settings: _objectSpread({}, state.settings),\n  updating: state.user.updating\n});\nconst mapDispatch = {\n  updatePerformer\n};\nexport default connect(mapStates, mapDispatch)(BroadCaster);","map":{"version":3,"names":["React","Router","Head","Error","connect","updatePerformer","PerformerSettingsForm","PerformerVerificationForm","DashBoard","BroadcasterTopHeader","BroadCaster","PureComponent","constructor","args","_defineProperty","currentTab","handleTabChange","tab","setState","string","charAt","toUpperCase","slice","data","currentUser","handleUpdatePerformer","props","privateChatPrice","messagePrice","Number","_objectSpread","isUpdateProfile","getInitialProps","ctx","query","componentDidMount","window","addEventListener","onbeforeunload","events","on","componentWillUnmount","removeEventListener","off","render","error","ui","updating","state","__jsx","statusCode","title","message","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","Fragment","capitalizeFirstLetter","siteName","className","activeTab","updateTab","onFinish","submit","user","mapStates","current","settings","mapDispatch"],"sources":["C:/Users/Rokibul/Documents/case/pages/broadcaster-dashboard/index.tsx"],"sourcesContent":["import React from 'react';\nimport { Layout, Tabs } from 'antd';\nimport Router from 'next/router';\nimport Head from 'next/head';\nimport Error from 'next/error';\nimport { connect } from 'react-redux';\nimport { updatePerformer } from 'src/redux/user/actions';\nimport { IPerformer } from 'src/interfaces';\nimport '../user/index.less';\nimport { PerformerSettingsForm, PerformerVerificationForm } from '@components/performer';\nimport DashBoard from '@components/dashboard';\nimport { ROLE_PERMISSIONS } from 'src/constants';\nimport { NextPageContext } from 'next';\nimport { BroadcasterTopHeader } from '@components/broadcaster-dashboard/broadcaster-top-header';\n\ninterface IProps {\n  error: any;\n  ui: any;\n  currentUser: IPerformer;\n  updating: boolean;\n  updatePerformer: Function;\n  query: { [key: string]: any };\n}\n\nclass BroadCaster extends React.PureComponent<IProps> {\n  static authenticate = true;\n  static noredirect = true;\n\n  state = {\n    currentTab: 'dashboard'\n  };\n\n  static async getInitialProps({ ctx }: { ctx: NextPageContext }) {\n    const { query } = ctx;\n    return { query };\n  }\n\n  componentDidMount() {\n    const { query } = this.props;\n    if (query?.tab) {\n      this.setState({ currentTab: query.tab });\n    }\n    window.addEventListener('beforeunload', this.onbeforeunload);\n    Router.events.on('routeChangeStart', this.onbeforeunload);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('beforeunload', this.onbeforeunload);\n    Router.events.off('routeChangeStart', this.onbeforeunload);\n  }\n\n  onbeforeunload = () => {\n    this.handleTabChange('verification');\n  };\n\n  handleTabChange = (tab: string) => {\n    this.setState({ currentTab: tab });\n  };\n\n  capitalizeFirstLetter = (string: string) => string?.charAt(0).toUpperCase() + string?.slice(1);\n\n  submit = (data: any) => {\n    const { currentUser, updatePerformer: handleUpdatePerformer } = this.props;\n    if (data.privateChatPrice || data.messagePrice) {\n      data.privateChatPrice = Number(data.privateChatPrice)\n      data.messagePrice = Number(data.messagePrice)\n    }\n    handleUpdatePerformer({\n      ...currentUser,\n      ...data,\n      isUpdateProfile: true\n    });\n  };\n\n  render() {\n    const { error, ui, currentUser, updating } = this.props;\n    const { currentTab } = this.state;\n\n    if (error) {\n      return <Error statusCode={error?.statusCode || 404} title={error?.message || \"Sorry, we can't find this page\"} />;\n    }\n\n    return (\n      <>\n        <Head>\n          <title>\n            BroadCaster | {ui && this.capitalizeFirstLetter(ui.siteName)}\n          </title>\n        </Head>\n        <section className='px-4'>\n          <BroadcasterTopHeader activeTab={currentTab} updateTab={this.handleTabChange} />\n          {currentTab === 'dashboard' && \n            <DashBoard />\n          }\n          {currentTab === 'settings' && \n            <PerformerSettingsForm onFinish={this.submit} updating={updating} user={currentUser} />\n          }\n          {currentTab === 'verification' && \n            <PerformerVerificationForm onFinish={this.submit} user={currentUser} />\n          }\n          {/* <Tabs activeKey={currentTab} onChange={this.handleTabChange}>\n            <Tabs.TabPane tab=\"Dashboard\" key=\"dashboard\">\n            </Tabs.TabPane>\n            <Tabs.TabPane tab=\"Settings\" key=\"settings\">\n              <PerformerSettingsForm onFinish={this.submit} updating={updating} user={currentUser} />\n            </Tabs.TabPane>\n            <Tabs.TabPane tab=\"Verification\" key=\"verification\">\n              <PerformerVerificationForm onFinish={this.submit} user={currentUser} />\n            </Tabs.TabPane>\n          </Tabs> */}\n        </section>\n      </>\n    );\n  }\n}\n\nconst mapStates = (state: any) => ({\n  ui: { ...state.ui },\n  currentUser: { ...state.user.current },\n  settings: { ...state.settings },\n  updating: state.user.updating\n});\n\nconst mapDispatch = { updatePerformer };\n\nexport default connect(mapStates, mapDispatch)(BroadCaster);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}