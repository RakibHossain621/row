{"ast":null,"code":"import classnames from 'classnames';\nexport function initializePlayer(id, cls) {\n  var video = document.createElement('video');\n  video.id = id;\n  video.className = classnames('video-js broadcaster', cls);\n  video.autoplay = true;\n  video.muted = true;\n  video.controls = true;\n  video.playsInline = true;\n  return video;\n}\n\n// eslint-disable-next-line no-shadow\nexport function tryToPlay(url, appName, streamId, token, type, subscriberId, subscriberCode, noStreamCallback, initializePlayer) {\n  fetch(\"\".concat(window.location.protocol, \"//\").concat(url, \"/\").concat(appName, \"/streams/\").concat(streamId, \"_adaptive.\").concat(type), {\n    method: 'HEAD'\n  }).then(function (response) {\n    if (response.status === 200) {\n      // adaptive m3u8 & mpd exists,play it\n      initializePlayer(\"\".concat(streamId, \"_adaptive\"), type, token, subscriberId, subscriberCode);\n    } else {\n      // adaptive not exists, try mpd or m3u8 exists.\n      fetch(\"\".concat(window.location.protocol, \"//\").concat(url, \"/\").concat(appName, \"/streams/\").concat(streamId, \".\").concat(type), {\n        method: 'HEAD'\n      })\n      // eslint-disable-next-line no-shadow\n      .then(function (response) {\n        if (response.status === 200) {\n          initializePlayer(streamId, type, token, subscriberId, subscriberCode);\n        } else {\n          // eslint-disable-next-line no-console\n          console.log('No stream found');\n          if (typeof noStreamCallback !== 'undefined') {\n            noStreamCallback();\n          }\n        }\n      })[\"catch\"](function (err) {\n        // eslint-disable-next-line no-console\n        console.log(\"Error: \".concat(err));\n      });\n    }\n  })[\"catch\"](function (err) {\n    // eslint-disable-next-line no-console\n    console.log(\"Error: \".concat(err));\n  });\n}","map":{"version":3,"names":["classnames","initializePlayer","id","cls","video","document","createElement","className","autoplay","muted","controls","playsInline","tryToPlay","url","appName","streamId","token","type","subscriberId","subscriberCode","noStreamCallback","fetch","concat","window","location","protocol","method","then","response","status","console","log","err"],"sources":["C:/Users/roman/Pictures/Case/row/src/antmedia/utils.ts"],"sourcesContent":["import classnames from 'classnames';\r\n\r\nexport function initializePlayer(id: string, cls?: string): HTMLVideoElement {\r\n  const video = document.createElement('video');\r\n  video.id = id;\r\n  video.className = classnames('video-js broadcaster', cls);\r\n  video.autoplay = true;\r\n  video.muted = true;\r\n  video.controls = true;\r\n  video.playsInline = true;\r\n  return video;\r\n}\r\n\r\n// eslint-disable-next-line no-shadow\r\nexport function tryToPlay(url: string, appName: string, streamId: string, token: string, type: string, subscriberId: string, subscriberCode: string, noStreamCallback: Function, initializePlayer: Function) {\r\n  fetch(`${window.location.protocol}//${url}/${appName}/streams/${streamId}_adaptive.${type}`, { method: 'HEAD' })\r\n    .then((response) => {\r\n      if (response.status === 200) {\r\n        // adaptive m3u8 & mpd exists,play it\r\n        initializePlayer(`${streamId}_adaptive`, type, token, subscriberId, subscriberCode);\r\n      } else {\r\n        // adaptive not exists, try mpd or m3u8 exists.\r\n        fetch(`${window.location.protocol}//${url}/${appName}/streams/${streamId}.${type}`, { method: 'HEAD' })\r\n          // eslint-disable-next-line no-shadow\r\n          .then((response) => {\r\n            if (response.status === 200) {\r\n              initializePlayer(streamId, type, token, subscriberId, subscriberCode);\r\n            } else {\r\n              // eslint-disable-next-line no-console\r\n              console.log('No stream found');\r\n              if (typeof noStreamCallback !== 'undefined') {\r\n                noStreamCallback();\r\n              }\r\n            }\r\n          }).catch((err) => {\r\n            // eslint-disable-next-line no-console\r\n            console.log(`Error: ${err}`);\r\n          });\r\n      }\r\n    }).catch((err) => {\r\n      // eslint-disable-next-line no-console\r\n      console.log(`Error: ${err}`);\r\n    });\r\n}\r\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,YAAY;AAEnC,OAAO,SAASC,gBAAgBA,CAACC,EAAU,EAAEC,GAAY,EAAoB;EAC3E,IAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;EAC7CF,KAAK,CAACF,EAAE,GAAGA,EAAE;EACbE,KAAK,CAACG,SAAS,GAAGP,UAAU,CAAC,sBAAsB,EAAEG,GAAG,CAAC;EACzDC,KAAK,CAACI,QAAQ,GAAG,IAAI;EACrBJ,KAAK,CAACK,KAAK,GAAG,IAAI;EAClBL,KAAK,CAACM,QAAQ,GAAG,IAAI;EACrBN,KAAK,CAACO,WAAW,GAAG,IAAI;EACxB,OAAOP,KAAK;AACd;;AAEA;AACA,OAAO,SAASQ,SAASA,CAACC,GAAW,EAAEC,OAAe,EAAEC,QAAgB,EAAEC,KAAa,EAAEC,IAAY,EAAEC,YAAoB,EAAEC,cAAsB,EAAEC,gBAA0B,EAAEnB,gBAA0B,EAAE;EAC3MoB,KAAK,IAAAC,MAAA,CAAIC,MAAM,CAACC,QAAQ,CAACC,QAAQ,QAAAH,MAAA,CAAKT,GAAG,OAAAS,MAAA,CAAIR,OAAO,eAAAQ,MAAA,CAAYP,QAAQ,gBAAAO,MAAA,CAAaL,IAAI,GAAI;IAAES,MAAM,EAAE;EAAO,CAAC,CAAC,CAC7GC,IAAI,CAAC,UAACC,QAAQ,EAAK;IAClB,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;MAC3B;MACA5B,gBAAgB,IAAAqB,MAAA,CAAIP,QAAQ,gBAAaE,IAAI,EAAED,KAAK,EAAEE,YAAY,EAAEC,cAAc,CAAC;IACrF,CAAC,MAAM;MACL;MACAE,KAAK,IAAAC,MAAA,CAAIC,MAAM,CAACC,QAAQ,CAACC,QAAQ,QAAAH,MAAA,CAAKT,GAAG,OAAAS,MAAA,CAAIR,OAAO,eAAAQ,MAAA,CAAYP,QAAQ,OAAAO,MAAA,CAAIL,IAAI,GAAI;QAAES,MAAM,EAAE;MAAO,CAAC;MACpG;MAAA,CACCC,IAAI,CAAC,UAACC,QAAQ,EAAK;QAClB,IAAIA,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;UAC3B5B,gBAAgB,CAACc,QAAQ,EAAEE,IAAI,EAAED,KAAK,EAAEE,YAAY,EAAEC,cAAc,CAAC;QACvE,CAAC,MAAM;UACL;UACAW,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;UAC9B,IAAI,OAAOX,gBAAgB,KAAK,WAAW,EAAE;YAC3CA,gBAAgB,CAAC,CAAC;UACpB;QACF;MACF,CAAC,CAAC,SAAM,CAAC,UAACY,GAAG,EAAK;QAChB;QACAF,OAAO,CAACC,GAAG,WAAAT,MAAA,CAAWU,GAAG,CAAE,CAAC;MAC9B,CAAC,CAAC;IACN;EACF,CAAC,CAAC,SAAM,CAAC,UAACA,GAAG,EAAK;IAChB;IACAF,OAAO,CAACC,GAAG,WAAAT,MAAA,CAAWU,GAAG,CAAE,CAAC;EAC9B,CAAC,CAAC;AACN","ignoreList":[]},"metadata":{},"sourceType":"module"}