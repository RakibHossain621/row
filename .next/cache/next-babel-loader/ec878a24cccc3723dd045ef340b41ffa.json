{"ast":null,"code":"var _this = this,\n  _jsxFileName = \"C:\\\\Users\\\\Rokibul\\\\Documents\\\\case\\\\src\\\\components\\\\create-feed\\\\create-thumbnail-video-preview.tsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { generateVideoThumbnails } from '@rajesh896/video-thumbnails-generator';\nimport { Spin } from 'antd';\nimport { useEffect, useState } from 'react';\nexport var CreateThumbnailVideoPreview = function CreateThumbnailVideoPreview(_ref) {\n  _s();\n  var videoPreviewUrl = _ref.videoPreviewUrl,\n    videoFile = _ref.videoFile,\n    handleThumbnail = _ref.handleThumbnail;\n  var _useState = useState([]),\n    thumbnailImages = _useState[0],\n    setThumbnailImages = _useState[1];\n  var _useState2 = useState(null),\n    selectedThumbnail = _useState2[0],\n    setSelectedThumbnail = _useState2[1];\n  var _useState3 = useState(0),\n    selectedIndexProgress = _useState3[0],\n    setSeletedIndexProgress = _useState3[1];\n  var handleGenerateThumbnailsFromVideoFile = function handleGenerateThumbnailsFromVideoFile() {\n    generateVideoThumbnails(videoFile, 30, videoFile.type).then(function (thumbnailArray) {\n      // Process each base64 thumbnail to convert it into a File object\n      var thumbnails = thumbnailArray.map(function (thumbBase64, index) {\n        var byteString = atob(thumbBase64.split(',')[1]);\n        var mimeString = thumbBase64.split(',')[0].split(':')[1].split(';')[0];\n        var ab = new ArrayBuffer(byteString.length);\n        var ia = new Uint8Array(ab);\n        for (var i = 0; i < byteString.length; i++) {\n          ia[i] = byteString.charCodeAt(i);\n        }\n        var blob = new Blob([ab], {\n          type: mimeString\n        });\n        var file = new File([blob], \"thumbnail_\".concat(index, \".png\"), {\n          type: mimeString\n        });\n        return {\n          imgUrl: thumbBase64,\n          imgFile: file\n        };\n      });\n      setThumbnailImages(thumbnails);\n      setSelectedThumbnail(thumbnails[0]);\n    })[\"catch\"](function (err) {\n      console.error('Error generating thumbnails:', err);\n    });\n  };\n  useEffect(function () {\n    handleGenerateThumbnailsFromVideoFile();\n  }, [videoPreviewUrl, videoFile]);\n  useEffect(function () {\n    selectedThumbnail && handleThumbnail(selectedThumbnail.imgFile);\n  }, [selectedThumbnail]);\n  useEffect(function () {\n    setSelectedThumbnail(thumbnailImages[selectedIndexProgress]);\n  }, [selectedIndexProgress]);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"w-full bg-gray-200 relative\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, selectedThumbnail ? __jsx(React.Fragment, null, __jsx(\"img\", {\n    src: selectedThumbnail.imgUrl,\n    alt: 'Thumbnail Selected',\n    className: \"w-full max-w-[260px] m-auto rounded\",\n    style: {\n      aspectRatio: '4 / 6',\n      objectFit: 'cover'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }), __jsx(\"input\", {\n    className: \"w-full max-w-[380px] m-auto absolute left-0 right-0 bottom-4 progressBarThumbnail\",\n    type: \"range\",\n    max: thumbnailImages.length - 1,\n    onChange: function onChange(e) {\n      return setSeletedIndexProgress(Number(e.target.value));\n    },\n    value: selectedIndexProgress,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  })) : __jsx(\"video\", {\n    style: {\n      aspectRatio: '4 / 6',\n      objectFit: 'cover'\n    },\n    className: \"w-full max-w-[260px] m-auto rounded\",\n    src: videoPreviewUrl,\n    controls: true,\n    autoPlay: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"w-full pl-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, __jsx(\"h4\", {\n    className: \"text-black pb-2 pt-4 bg-white\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, \"Select a thumbnail by moving the slider\"), __jsx(\"div\", {\n    className: \"flex items-center justify-start w-full bg-white overflow-x-scroll pb-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, !thumbnailImages.length && __jsx(Spin, {\n    className: \"m-auto pt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 39\n    }\n  }), thumbnailImages.map(function (thumbImg, index) {\n    return __jsx(\"div\", {\n      key: index,\n      onClick: function onClick() {\n        return setSelectedThumbnail(thumbImg);\n      },\n      className: \"h-32 w-32 flex-none bg-black rounded cursor-pointer \".concat(thumbImg === selectedThumbnail ? 'border-2 border-blue-800' : ''),\n      style: {\n        backgroundImage: \"url(\".concat(thumbImg.imgUrl, \")\"),\n        backgroundSize: 'cover',\n        backgroundPosition: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    });\n  }))));\n};\n_s(CreateThumbnailVideoPreview, \"CvFlDZHw+fTL9FsGNWkWOT9slV0=\");\n_c = CreateThumbnailVideoPreview;\nvar _c;\n$RefreshReg$(_c, \"CreateThumbnailVideoPreview\");","map":{"version":3,"names":["generateVideoThumbnails","Spin","useEffect","useState","CreateThumbnailVideoPreview","_ref","_s","videoPreviewUrl","videoFile","handleThumbnail","_useState","thumbnailImages","setThumbnailImages","_useState2","selectedThumbnail","setSelectedThumbnail","_useState3","selectedIndexProgress","setSeletedIndexProgress","handleGenerateThumbnailsFromVideoFile","type","then","thumbnailArray","thumbnails","map","thumbBase64","index","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","blob","Blob","file","File","concat","imgUrl","imgFile","err","console","error","__jsx","React","Fragment","className","__self","_this","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","style","aspectRatio","objectFit","max","onChange","e","Number","target","value","controls","autoPlay","thumbImg","key","onClick","backgroundImage","backgroundSize","backgroundPosition","_c","$RefreshReg$"],"sources":["C:/Users/Rokibul/Documents/case/src/components/create-feed/create-thumbnail-video-preview.tsx"],"sourcesContent":["import { generateVideoThumbnails } from '@rajesh896/video-thumbnails-generator'\nimport { Spin } from 'antd'\nimport { useEffect, useState } from 'react'\n\ninterface ThumbnailImagesCollectionType {\n  imgUrl: string\n  imgFile: File\n}\n\nexport const CreateThumbnailVideoPreview = ({\n  videoPreviewUrl,\n  videoFile,\n  handleThumbnail\n}: {\n  videoPreviewUrl: string,\n  videoFile: File,\n  handleThumbnail: (thumbFile: File) => void\n}) => {\n  const [thumbnailImages, setThumbnailImages] = useState<ThumbnailImagesCollectionType[]>([])\n  const [selectedThumbnail, setSelectedThumbnail] = useState<ThumbnailImagesCollectionType | null>(null)\n\n  const [selectedIndexProgress, setSeletedIndexProgress] = useState(0)\n\n  const handleGenerateThumbnailsFromVideoFile = () => {\n    generateVideoThumbnails(videoFile, 30, videoFile.type)\n      .then((thumbnailArray) => {\n        // Process each base64 thumbnail to convert it into a File object\n        const thumbnails = thumbnailArray.map((thumbBase64: string, index: number) => {\n          const byteString = atob(thumbBase64.split(',')[1])\n          const mimeString = thumbBase64.split(',')[0].split(':')[1].split(';')[0]\n\n          const ab = new ArrayBuffer(byteString.length)\n          const ia = new Uint8Array(ab)\n\n          for (let i = 0; i < byteString.length; i++) {\n            ia[i] = byteString.charCodeAt(i)\n          }\n\n          const blob = new Blob([ab], { type: mimeString })\n          const file = new File([blob], `thumbnail_${index}.png`, { type: mimeString })\n\n          return {\n            imgUrl: thumbBase64,\n            imgFile: file\n          }\n        })\n\n        setThumbnailImages(thumbnails)\n        setSelectedThumbnail(thumbnails[0])\n      })\n      .catch((err) => {\n        console.error('Error generating thumbnails:', err)\n      })\n  }\n\n  useEffect(() => {\n    handleGenerateThumbnailsFromVideoFile()\n  }, [videoPreviewUrl, videoFile])\n\n  useEffect(() => {\n    selectedThumbnail && handleThumbnail(selectedThumbnail.imgFile)\n  }, [selectedThumbnail])\n\n  useEffect(() => {\n    setSelectedThumbnail(thumbnailImages[selectedIndexProgress])\n  }, [selectedIndexProgress])\n\n  return (\n    <>\n      <div className='w-full bg-gray-200 relative'>\n        {selectedThumbnail \n          ? <>\n            <img \n              src={selectedThumbnail.imgUrl}\n              alt={'Thumbnail Selected'}\n              className='w-full max-w-[260px] m-auto rounded'\n              style={{aspectRatio: '4 / 6', objectFit: 'cover'}} \n            />\n            <input className='w-full max-w-[380px] m-auto absolute left-0 right-0 bottom-4 progressBarThumbnail' type=\"range\" max={thumbnailImages.length - 1} onChange={(e) => setSeletedIndexProgress(Number(e.target.value))} value={selectedIndexProgress} />\n          </>\n          : <video style={{ aspectRatio: '4 / 6', objectFit: 'cover' }} className='w-full max-w-[260px] m-auto rounded' src={videoPreviewUrl} controls autoPlay />\n        }\n      </div>\n      <div className='w-full pl-2'>  \n        <h4 className='text-black pb-2 pt-4 bg-white'>Select a thumbnail by moving the slider</h4>\n        <div className='flex items-center justify-start w-full bg-white overflow-x-scroll pb-4'>\n          {!thumbnailImages.length && <Spin className='m-auto pt-2' />}\n          {thumbnailImages.map((thumbImg, index) => (\n            <div\n              key={index}\n              onClick={() => setSelectedThumbnail(thumbImg)}\n              className={`h-32 w-32 flex-none bg-black rounded cursor-pointer ${thumbImg === selectedThumbnail ? 'border-2 border-blue-800' : ''}`}\n              style={{ backgroundImage: `url(${thumbImg.imgUrl})`, backgroundSize: 'cover', backgroundPosition: 'center' }}\n            />\n          ))}\n        </div>\n      </div>\n    </>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}