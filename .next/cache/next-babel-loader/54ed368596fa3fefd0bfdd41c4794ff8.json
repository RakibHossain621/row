{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Rokibul\\\\Documents\\\\case\\\\src\\\\components\\\\common\\\\ProfileFollowButton.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { message } from \"antd\";\nimport { buttonVariants } from \"@components/ui/shared/AppButton\";\nimport { followService } from \"@services/follow.service\";\nconst FollowButton = ({\n  performer,\n  currentUser,\n  onFollow\n}) => {\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: isFollowing,\n    1: setIsFollowing\n  } = useState(performer.isFollowed);\n  const handleFollow = async () => {\n    if (!currentUser) return;\n    try {\n      if (isFollowing) {\n        const confirmUnfollow = window.confirm(\"Are you sure you want to unfollow this person?\");\n        if (!confirmUnfollow) return;\n        setLoading(true);\n        await followService.delete(performer._id);\n        onFollow && onFollow({\n          action: \"delete\",\n          performerId: performer._id\n        });\n        setIsFollowing(false);\n      } else {\n        setLoading(true);\n        await followService.create({\n          targetId: performer._id,\n          sourceId: currentUser._id\n        });\n        onFollow && onFollow({\n          action: \"create\",\n          performerId: performer._id\n        });\n        setIsFollowing(true);\n      }\n    } catch (error) {\n      message.error(error.message || \"Error occurred, please try again later\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  if ((currentUser === null || currentUser === void 0 ? void 0 : currentUser._id) === performer._id) return null;\n  return __jsx(\"button\", {\n    onClick: handleFollow,\n    type: \"button\",\n    className: `md:self-end md:ml-16 xl:ml-36 h-10 z-10 ${buttonVariants()}`,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, isFollowing ? \"Unfollow\" : \"Follow\"));\n};\nexport default FollowButton;","map":{"version":3,"names":["React","useState","message","buttonVariants","followService","FollowButton","performer","currentUser","onFollow","loading","setLoading","isFollowing","setIsFollowing","isFollowed","handleFollow","confirmUnfollow","window","confirm","delete","_id","action","performerId","create","targetId","sourceId","error","__jsx","onClick","type","className","disabled","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["C:/Users/Rokibul/Documents/case/src/components/common/ProfileFollowButton.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { message } from \"antd\";\nimport { buttonVariants } from \"@components/ui/shared/AppButton\";\nimport { IPerformer } from \"@interfaces/performer\";\nimport { followService } from \"@services/follow.service\";\n\ntype FollowButtonProps = {\n  performer: IPerformer;\n  currentUser?: IPerformer | null;\n  onFollow?: (data: {\n    action: \"create\" | \"delete\";\n    performerId: string;\n  }) => void;\n};\n\nconst FollowButton: React.FC<FollowButtonProps> = ({\n  performer,\n  currentUser,\n  onFollow,\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [isFollowing, setIsFollowing] = useState(performer.isFollowed);\n\n  const handleFollow = async () => {\n    if (!currentUser) return;\n\n    try {\n      if (isFollowing) {\n        const confirmUnfollow = window.confirm(\n          \"Are you sure you want to unfollow this person?\"\n        );\n        if (!confirmUnfollow) return;\n\n        setLoading(true);\n        await followService.delete(performer._id);\n        onFollow && onFollow({ action: \"delete\", performerId: performer._id });\n        setIsFollowing(false);\n      } else {\n        setLoading(true);\n        await followService.create({\n          targetId: performer._id,\n          sourceId: currentUser._id,\n        });\n        onFollow && onFollow({ action: \"create\", performerId: performer._id });\n        setIsFollowing(true);\n      }\n    } catch (error) {\n      message.error(\n        (error as Error).message || \"Error occurred, please try again later\"\n      );\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (currentUser?._id === performer._id) return null;\n\n  return (\n    <button\n      onClick={handleFollow}\n      type=\"button\"\n      className={`md:self-end md:ml-16 xl:ml-36 h-10 z-10 ${buttonVariants()}`}\n      disabled={loading}\n    >\n      <span>{isFollowing ? \"Unfollow\" : \"Follow\"}</span>\n    </button>\n  );\n};\n\nexport default FollowButton;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,OAAO,QAAQ,MAAM;AAC9B,SAASC,cAAc,QAAQ,iCAAiC;AAEhE,SAASC,aAAa,QAAQ,0BAA0B;AAWxD,MAAMC,YAAyC,GAAGA,CAAC;EACjDC,SAAS;EACTC,WAAW;EACXC;AACF,CAAC,KAAK;EACJ,MAAM;IAAA,GAACC,OAAO;IAAA,GAAEC;EAAU,IAAIT,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM;IAAA,GAACU,WAAW;IAAA,GAAEC;EAAc,IAAIX,QAAQ,CAACK,SAAS,CAACO,UAAU,CAAC;EAEpE,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI,CAACP,WAAW,EAAE;IAElB,IAAI;MACF,IAAII,WAAW,EAAE;QACf,MAAMI,eAAe,GAAGC,MAAM,CAACC,OAAO,CACpC,gDACF,CAAC;QACD,IAAI,CAACF,eAAe,EAAE;QAEtBL,UAAU,CAAC,IAAI,CAAC;QAChB,MAAMN,aAAa,CAACc,MAAM,CAACZ,SAAS,CAACa,GAAG,CAAC;QACzCX,QAAQ,IAAIA,QAAQ,CAAC;UAAEY,MAAM,EAAE,QAAQ;UAAEC,WAAW,EAAEf,SAAS,CAACa;QAAI,CAAC,CAAC;QACtEP,cAAc,CAAC,KAAK,CAAC;MACvB,CAAC,MAAM;QACLF,UAAU,CAAC,IAAI,CAAC;QAChB,MAAMN,aAAa,CAACkB,MAAM,CAAC;UACzBC,QAAQ,EAAEjB,SAAS,CAACa,GAAG;UACvBK,QAAQ,EAAEjB,WAAW,CAACY;QACxB,CAAC,CAAC;QACFX,QAAQ,IAAIA,QAAQ,CAAC;UAAEY,MAAM,EAAE,QAAQ;UAAEC,WAAW,EAAEf,SAAS,CAACa;QAAI,CAAC,CAAC;QACtEP,cAAc,CAAC,IAAI,CAAC;MACtB;IACF,CAAC,CAAC,OAAOa,KAAK,EAAE;MACdvB,OAAO,CAACuB,KAAK,CACVA,KAAK,CAAWvB,OAAO,IAAI,wCAC9B,CAAC;IACH,CAAC,SAAS;MACRQ,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,IAAI,CAAAH,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEY,GAAG,MAAKb,SAAS,CAACa,GAAG,EAAE,OAAO,IAAI;EAEnD,OACEO,KAAA;IACEC,OAAO,EAAEb,YAAa;IACtBc,IAAI,EAAC,QAAQ;IACbC,SAAS,EAAE,2CAA2C1B,cAAc,CAAC,CAAC,EAAG;IACzE2B,QAAQ,EAAErB,OAAQ;IAAAsB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAElBV,KAAA;IAAAK,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GAAOzB,WAAW,GAAG,UAAU,GAAG,QAAe,CAC3C,CAAC;AAEb,CAAC;AAED,eAAeN,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}