{"ast":null,"code":"function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* eslint-disable react/require-default-props */\nimport Router from 'next/router';\nimport { PureComponent } from 'react';\nimport { SocketContext } from './SocketContext';\nimport { warning } from './utils';\nclass Event extends PureComponent {\n  constructor(props) {\n    super(props);\n    _defineProperty(this, \"_handleRouteChangeComplete\", () => {\n      const {\n        handleRouterChange,\n        event,\n        handler\n      } = this.props;\n      const socket = this.context;\n      handleRouterChange && socket.on(event, handler);\n    });\n  }\n  componentDidMount() {\n    const {\n      event,\n      handler\n    } = this.props;\n    const socket = this.context;\n    if (!socket) {\n      warning('Socket IO connection has not been established.');\n      return;\n    }\n    socket.on(event, handler);\n  }\n  componentWillUnmount() {\n    const {\n      event\n    } = this.props;\n    const socket = this.context;\n    if (!socket) {\n      warning('Socket IO connection has not been established.');\n      return;\n    }\n    socket.off(event);\n    Router.events.off('routeChangeComplete', this._handleRouteChangeComplete);\n  }\n  render() {\n    return false;\n  }\n}\nEvent.contextType = SocketContext;\nexport default Event;","map":{"version":3,"names":["Router","PureComponent","SocketContext","warning","Event","constructor","props","_defineProperty","handleRouterChange","event","handler","socket","context","on","componentDidMount","componentWillUnmount","off","events","_handleRouteChangeComplete","render","contextType"],"sources":["C:/Users/Rokibul/Documents/case/src/socket/Event.tsx"],"sourcesContent":["/* eslint-disable react/require-default-props */\nimport Router from 'next/router';\nimport { PureComponent } from 'react';\nimport { SocketContext } from './SocketContext';\nimport { warning } from './utils';\n\ninterface IEventProps {\n  event: string;\n  handler: Function;\n  handleRouterChange?: boolean;\n}\n\nclass Event extends PureComponent<IEventProps> {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    const { event, handler } = this.props;\n    const socket = this.context;\n\n    if (!socket) {\n      warning('Socket IO connection has not been established.');\n      return;\n    }\n\n    socket.on(event, handler);\n  }\n\n  componentWillUnmount() {\n    const { event } = this.props;\n    const socket = this.context;\n\n    if (!socket) {\n      warning('Socket IO connection has not been established.');\n      return;\n    }\n\n    socket.off(event);\n    Router.events.off('routeChangeComplete', this._handleRouteChangeComplete);\n  }\n\n  _handleRouteChangeComplete = () => {\n    const { handleRouterChange, event, handler } = this.props;\n    const socket = this.context;\n    handleRouterChange && socket.on(event, handler);\n  }\n\n  render() {\n    return false;\n  }\n}\n\nEvent.contextType = SocketContext;\n\nexport default Event;\n"],"mappings":";;;AAAA;AACA,OAAOA,MAAM,MAAM,aAAa;AAChC,SAASC,aAAa,QAAQ,OAAO;AACrC,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,SAASC,OAAO,QAAQ,SAAS;AAQjC,MAAMC,KAAK,SAASH,aAAa,CAAc;EAC7CI,WAAWA,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAACC,eAAA,qCA4Bc,MAAM;MACjC,MAAM;QAAEC,kBAAkB;QAAEC,KAAK;QAAEC;MAAQ,CAAC,GAAG,IAAI,CAACJ,KAAK;MACzD,MAAMK,MAAM,GAAG,IAAI,CAACC,OAAO;MAC3BJ,kBAAkB,IAAIG,MAAM,CAACE,EAAE,CAACJ,KAAK,EAAEC,OAAO,CAAC;IACjD,CAAC;EA/BD;EAEAI,iBAAiBA,CAAA,EAAG;IAClB,MAAM;MAAEL,KAAK;MAAEC;IAAQ,CAAC,GAAG,IAAI,CAACJ,KAAK;IACrC,MAAMK,MAAM,GAAG,IAAI,CAACC,OAAO;IAE3B,IAAI,CAACD,MAAM,EAAE;MACXR,OAAO,CAAC,gDAAgD,CAAC;MACzD;IACF;IAEAQ,MAAM,CAACE,EAAE,CAACJ,KAAK,EAAEC,OAAO,CAAC;EAC3B;EAEAK,oBAAoBA,CAAA,EAAG;IACrB,MAAM;MAAEN;IAAM,CAAC,GAAG,IAAI,CAACH,KAAK;IAC5B,MAAMK,MAAM,GAAG,IAAI,CAACC,OAAO;IAE3B,IAAI,CAACD,MAAM,EAAE;MACXR,OAAO,CAAC,gDAAgD,CAAC;MACzD;IACF;IAEAQ,MAAM,CAACK,GAAG,CAACP,KAAK,CAAC;IACjBT,MAAM,CAACiB,MAAM,CAACD,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAACE,0BAA0B,CAAC;EAC3E;EAQAC,MAAMA,CAAA,EAAG;IACP,OAAO,KAAK;EACd;AACF;AAEAf,KAAK,CAACgB,WAAW,GAAGlB,aAAa;AAEjC,eAAeE,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module"}