{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\n/* eslint-disable react/require-default-props */\nimport Router from 'next/router';\nimport { PureComponent } from 'react';\nimport { SocketContext } from './SocketContext';\nimport { warning } from './utils';\nvar Event = /*#__PURE__*/function (_PureComponent) {\n  function Event(props) {\n    var _this;\n    _classCallCheck(this, Event);\n    _this = _callSuper(this, Event, [props]);\n    _defineProperty(_this, \"_handleRouteChangeComplete\", function () {\n      var _this$props = _this.props,\n        handleRouterChange = _this$props.handleRouterChange,\n        event = _this$props.event,\n        handler = _this$props.handler;\n      var socket = _this.context;\n      handleRouterChange && socket.on(event, handler);\n    });\n    return _this;\n  }\n  _inherits(Event, _PureComponent);\n  return _createClass(Event, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n        event = _this$props2.event,\n        handler = _this$props2.handler;\n      var socket = this.context;\n      if (!socket) {\n        warning('Socket IO connection has not been established.');\n        return;\n      }\n      socket.on(event, handler);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var event = this.props.event;\n      var socket = this.context;\n      if (!socket) {\n        warning('Socket IO connection has not been established.');\n        return;\n      }\n      socket.off(event);\n      Router.events.off('routeChangeComplete', this._handleRouteChangeComplete);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return false;\n    }\n  }]);\n}(PureComponent);\nEvent.contextType = SocketContext;\nexport default Event;","map":{"version":3,"names":["Router","PureComponent","SocketContext","warning","Event","_PureComponent","props","_this","_classCallCheck","_callSuper","_defineProperty","_this$props","handleRouterChange","event","handler","socket","context","on","_inherits","_createClass","key","value","componentDidMount","_this$props2","componentWillUnmount","off","events","_handleRouteChangeComplete","render","contextType"],"sources":["C:/Users/Rokibul/Documents/case/src/socket/Event.tsx"],"sourcesContent":["/* eslint-disable react/require-default-props */\nimport Router from 'next/router';\nimport { PureComponent } from 'react';\nimport { SocketContext } from './SocketContext';\nimport { warning } from './utils';\n\ninterface IEventProps {\n  event: string;\n  handler: Function;\n  handleRouterChange?: boolean;\n}\n\nclass Event extends PureComponent<IEventProps> {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    const { event, handler } = this.props;\n    const socket = this.context;\n\n    if (!socket) {\n      warning('Socket IO connection has not been established.');\n      return;\n    }\n\n    socket.on(event, handler);\n  }\n\n  componentWillUnmount() {\n    const { event } = this.props;\n    const socket = this.context;\n\n    if (!socket) {\n      warning('Socket IO connection has not been established.');\n      return;\n    }\n\n    socket.off(event);\n    Router.events.off('routeChangeComplete', this._handleRouteChangeComplete);\n  }\n\n  _handleRouteChangeComplete = () => {\n    const { handleRouterChange, event, handler } = this.props;\n    const socket = this.context;\n    handleRouterChange && socket.on(event, handler);\n  }\n\n  render() {\n    return false;\n  }\n}\n\nEvent.contextType = SocketContext;\n\nexport default Event;\n"],"mappings":";;;;;;;;AAAA;AACA,OAAOA,MAAM,MAAM,aAAa;AAChC,SAASC,aAAa,QAAQ,OAAO;AACrC,SAASC,aAAa,QAAQ,iBAAiB;AAC/C,SAASC,OAAO,QAAQ,SAAS;AAAC,IAQ5BC,KAAK,0BAAAC,cAAA;EACT,SAAAD,MAAYE,KAAK,EAAE;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAJ,KAAA;IACjBG,KAAA,GAAAE,UAAA,OAAAL,KAAA,GAAME,KAAK;IAAEI,eAAA,CAAAH,KAAA,gCA4Bc,YAAM;MACjC,IAAAI,WAAA,GAA+CJ,KAAA,CAAKD,KAAK;QAAjDM,kBAAkB,GAAAD,WAAA,CAAlBC,kBAAkB;QAAEC,KAAK,GAAAF,WAAA,CAALE,KAAK;QAAEC,OAAO,GAAAH,WAAA,CAAPG,OAAO;MAC1C,IAAMC,MAAM,GAAGR,KAAA,CAAKS,OAAO;MAC3BJ,kBAAkB,IAAIG,MAAM,CAACE,EAAE,CAACJ,KAAK,EAAEC,OAAO,CAAC;IACjD,CAAC;IAAA,OAAAP,KAAA;EA/BD;EAACW,SAAA,CAAAd,KAAA,EAAAC,cAAA;EAAA,OAAAc,YAAA,CAAAf,KAAA;IAAAgB,GAAA;IAAAC,KAAA,EAED,SAAAC,iBAAiBA,CAAA,EAAG;MAClB,IAAAC,YAAA,GAA2B,IAAI,CAACjB,KAAK;QAA7BO,KAAK,GAAAU,YAAA,CAALV,KAAK;QAAEC,OAAO,GAAAS,YAAA,CAAPT,OAAO;MACtB,IAAMC,MAAM,GAAG,IAAI,CAACC,OAAO;MAE3B,IAAI,CAACD,MAAM,EAAE;QACXZ,OAAO,CAAC,gDAAgD,CAAC;QACzD;MACF;MAEAY,MAAM,CAACE,EAAE,CAACJ,KAAK,EAAEC,OAAO,CAAC;IAC3B;EAAC;IAAAM,GAAA;IAAAC,KAAA,EAED,SAAAG,oBAAoBA,CAAA,EAAG;MACrB,IAAQX,KAAK,GAAK,IAAI,CAACP,KAAK,CAApBO,KAAK;MACb,IAAME,MAAM,GAAG,IAAI,CAACC,OAAO;MAE3B,IAAI,CAACD,MAAM,EAAE;QACXZ,OAAO,CAAC,gDAAgD,CAAC;QACzD;MACF;MAEAY,MAAM,CAACU,GAAG,CAACZ,KAAK,CAAC;MACjBb,MAAM,CAAC0B,MAAM,CAACD,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAACE,0BAA0B,CAAC;IAC3E;EAAC;IAAAP,GAAA;IAAAC,KAAA,EAQD,SAAAO,MAAMA,CAAA,EAAG;MACP,OAAO,KAAK;IACd;EAAC;AAAA,EAtCiB3B,aAAa;AAyCjCG,KAAK,CAACyB,WAAW,GAAG3B,aAAa;AAEjC,eAAeE,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module"}